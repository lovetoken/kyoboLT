# Readme



# install `kyoboLT` package


```r
devtools::install_github("lovetoken/kyoboLT")
```

# Useful functions for time series data

## `Xday_returns()`


```r
index <- matrix(rnorm(120, 1000, 10^2), 30, 4)
data <- xts(round(index, 1), as.Date(16001:16030)) # xts package for time series data
names(data) <- paste("Fund", 1:4, sep="_")
data
```

```
##            Fund_1 Fund_2 Fund_3 Fund_4
## 2013-10-23  845.9 1026.7  998.3  843.8
## 2013-10-24 1008.0 1101.2  939.4  880.1
## 2013-10-25 1026.5  929.9  931.2 1019.1
## 2013-10-26  854.8 1084.9 1006.2  998.3
## 2013-10-27 1024.2  900.5 1085.9  952.8
## 2013-10-28 1041.6  926.4 1066.2  963.1
## 2013-10-29 1175.7 1152.7  962.5  999.3
## 2013-10-30 1105.8  936.2 1064.7  790.6
## 2013-10-31 1034.5  950.3 1066.9 1077.6
## 2013-11-01 1043.0  926.8  953.9  938.1
## 2013-11-02 1025.1 1120.5 1054.5  976.7
## 2013-11-03  833.1  983.1 1034.3 1023.0
## 2013-11-04  854.6  968.0  978.5  806.3
## 2013-11-05 1037.3  809.8 1052.1  757.6
## 2013-11-06 1026.9  887.6  852.1  880.5
## 2013-11-07 1034.8  893.5  906.9  908.9
## 2013-11-08  881.6 1043.7 1059.3 1066.5
## 2013-11-09  991.2  988.6  916.3 1018.7
## 2013-11-10 1040.3  932.2 1029.5  917.8
## 2013-11-11  954.0 1145.9  980.8 1155.3
## 2013-11-12 1031.4 1194.5  826.6  940.2
## 2013-11-13 1092.9  938.9 1146.8 1075.2
## 2013-11-14  919.6 1109.0  946.5  935.8
## 2013-11-15 1074.7  971.1 1005.1 1037.2
## 2013-11-16 1026.0 1132.7 1017.4  955.4
## 2013-11-17  982.4  852.3 1094.0  888.7
## 2013-11-18 1144.4  901.7  998.6  899.0
## 2013-11-19 1054.7  817.8  925.6 1127.1
## 2013-11-20 1104.3 1033.8 1159.1 1206.1
## 2013-11-21 1061.3  992.8 1035.5  800.6
```

```r
# basic 3 day returns
Xday_returns(data, Xday = 3)
```

```
##                  Fund_1       Fund_2        Fund_3       Fund_4
## 2013-10-26  0.010521338  0.056686471  0.0079134529  0.183100261
## 2013-10-27  0.016071429 -0.182255721  0.1559506068  0.082604250
## 2013-10-28  0.014710180 -0.003763846  0.1449742268 -0.054950446
## 2013-10-29  0.375409453  0.062494239 -0.0434307295  0.001001703
## 2013-10-30  0.079671939  0.039644642 -0.0195229763 -0.170235097
## 2013-10-31 -0.006816436  0.025798791  0.0006565372  0.118886928
## 2013-11-01 -0.112868929 -0.195974668 -0.0089350649 -0.061242870
## 2013-11-02 -0.072978839  0.196859645 -0.0095801634  0.235390842
## 2013-11-03 -0.194683422  0.034515416 -0.0305558159 -0.050668151
## 2013-11-04 -0.180632790  0.044454035  0.0257888668 -0.140496749
## 2013-11-05  0.011901278 -0.277286925 -0.0022759602 -0.224326815
## 2013-11-06  0.232625135 -0.097141695 -0.1761577879 -0.139296188
## 2013-11-07  0.210858881 -0.076962810 -0.0731732243  0.127247923
## 2013-11-08 -0.150101224  0.288836750  0.0068434559  0.407734952
## 2013-11-09 -0.034764826  0.113789995  0.0753432696  0.156956275
## 2013-11-10  0.005315037  0.043312815  0.1351857978  0.009792056
## 2013-11-11  0.082123412  0.097920858 -0.0741055414  0.083263010
## 2013-11-12  0.040556901  0.208274327 -0.0978937029 -0.077058997
## 2013-11-13  0.050562338  0.007187299  0.1139388052  0.171497058
## 2013-11-14 -0.036058700 -0.032201763 -0.0349714519 -0.189993941
## 2013-11-15  0.041981772 -0.187023859  0.2159448343  0.103169538
## 2013-11-16 -0.061213286  0.206411758 -0.1128357168 -0.111421131
## 2013-11-17  0.068290561 -0.231469793  0.1558372953 -0.050331267
## 2013-11-18  0.064855308 -0.071465349 -0.0064670182 -0.133243347
## 2013-11-19  0.027972710 -0.278008299 -0.0902299980  0.179715302
## 2013-11-20  0.124083876  0.212953185  0.0595063985  0.357150895
## 2013-11-21 -0.072614470  0.101031385  0.0369517324 -0.109454950
```

```r
# calculation 3 day log returns
Xday_returns(data, Xday = 3, log.returns = T)
```

```
##                  Fund_1       Fund_2        Fund_3       Fund_4
## 2013-10-26  0.010466374  0.055138042  0.0078823057  0.168138333
## 2013-10-27  0.015943650 -0.201205609  0.1449230416  0.079369481
## 2013-10-28  0.014603035 -0.003770947  0.1353821274 -0.056517915
## 2013-10-29  0.318751470  0.060619200 -0.0444020719  0.001001202
## 2013-10-30  0.076657235  0.038878964 -0.0197160669 -0.186612867
## 2013-10-31 -0.006839774  0.025471617  0.0006563218  0.112334377
## 2013-11-01 -0.119762539 -0.218124503 -0.0089752220 -0.063198481
## 2013-11-02 -0.075778886  0.179701164 -0.0096263484  0.211387392
## 2013-11-03 -0.216519814  0.033933120 -0.0310323778 -0.051996859
## 2013-11-04 -0.199222932  0.043494295  0.0254619427 -0.151400671
## 2013-11-05  0.011831015 -0.324742990 -0.0022785541 -0.254024001
## 2013-11-06  0.209146151 -0.102189653 -0.1937762575 -0.150004838
## 2013-11-07  0.191329927 -0.080085753 -0.0759885964  0.119779195
## 2013-11-08 -0.162638024  0.253740067  0.0068201458  0.341981996
## 2013-11-09 -0.035383504  0.107768610  0.0726399311  0.145792656
## 2013-11-10  0.005300962  0.042401049  0.1267963360  0.009744425
## 2013-11-11  0.078925233  0.093418263 -0.0769950264  0.079977792
## 2013-11-12  0.039756051  0.189193166 -0.1030229199 -0.080189965
## 2013-11-13  0.049325581  0.007161593  0.1079022075  0.158282468
## 2013-11-14 -0.036724879 -0.032731646 -0.0355975945 -0.210713551
## 2013-11-15  0.041124450 -0.207053517  0.1955214160  0.098187435
## 2013-11-16 -0.063166967  0.187650465 -0.1197251016 -0.118131869
## 2013-11-17  0.066059765 -0.263275410  0.1448250123 -0.051642058
## 2013-11-18  0.062838929 -0.074147579 -0.0064880200 -0.142997019
## 2013-11-19  0.027588620 -0.325741634 -0.0945634565  0.165273140
## 2013-11-20  0.116968372  0.193058035  0.0578031379  0.305387572
## 2013-11-21 -0.075385910  0.096247363  0.0362853828 -0.115921588
```

```r
# not omit about start time index
Xday_returns(data, Xday = 3, start.omit = F)
```

```
##                  Fund_1       Fund_2        Fund_3       Fund_4
## 2013-10-23           NA           NA            NA           NA
## 2013-10-24           NA           NA            NA           NA
## 2013-10-25           NA           NA            NA           NA
## 2013-10-26  0.010521338  0.056686471  0.0079134529  0.183100261
## 2013-10-27  0.016071429 -0.182255721  0.1559506068  0.082604250
## 2013-10-28  0.014710180 -0.003763846  0.1449742268 -0.054950446
## 2013-10-29  0.375409453  0.062494239 -0.0434307295  0.001001703
## 2013-10-30  0.079671939  0.039644642 -0.0195229763 -0.170235097
## 2013-10-31 -0.006816436  0.025798791  0.0006565372  0.118886928
## 2013-11-01 -0.112868929 -0.195974668 -0.0089350649 -0.061242870
## 2013-11-02 -0.072978839  0.196859645 -0.0095801634  0.235390842
## 2013-11-03 -0.194683422  0.034515416 -0.0305558159 -0.050668151
## 2013-11-04 -0.180632790  0.044454035  0.0257888668 -0.140496749
## 2013-11-05  0.011901278 -0.277286925 -0.0022759602 -0.224326815
## 2013-11-06  0.232625135 -0.097141695 -0.1761577879 -0.139296188
## 2013-11-07  0.210858881 -0.076962810 -0.0731732243  0.127247923
## 2013-11-08 -0.150101224  0.288836750  0.0068434559  0.407734952
## 2013-11-09 -0.034764826  0.113789995  0.0753432696  0.156956275
## 2013-11-10  0.005315037  0.043312815  0.1351857978  0.009792056
## 2013-11-11  0.082123412  0.097920858 -0.0741055414  0.083263010
## 2013-11-12  0.040556901  0.208274327 -0.0978937029 -0.077058997
## 2013-11-13  0.050562338  0.007187299  0.1139388052  0.171497058
## 2013-11-14 -0.036058700 -0.032201763 -0.0349714519 -0.189993941
## 2013-11-15  0.041981772 -0.187023859  0.2159448343  0.103169538
## 2013-11-16 -0.061213286  0.206411758 -0.1128357168 -0.111421131
## 2013-11-17  0.068290561 -0.231469793  0.1558372953 -0.050331267
## 2013-11-18  0.064855308 -0.071465349 -0.0064670182 -0.133243347
## 2013-11-19  0.027972710 -0.278008299 -0.0902299980  0.179715302
## 2013-11-20  0.124083876  0.212953185  0.0595063985  0.357150895
## 2013-11-21 -0.072614470  0.101031385  0.0369517324 -0.109454950
```

## `assess_returns()`


```r
returns <- Xday_returns(data, Xday = 1, log.returns = T)

assess_returns(returns, "mean")
```

```
##   Rank  Names  Value
## 1    1 Fund_1  0.78%
## 2    2 Fund_3  0.13%
## 3    3 Fund_2 -0.12%
## 4    4 Fund_4 -0.18%
```

```r
assess_returns(returns, "sd")
```

```
##   Rank  Names  Value
## 1    1 Fund_1 11.19%
## 2    2 Fund_3 12.49%
## 3    3 Fund_2 15.00%
## 4    4 Fund_4 15.84%
```

```r
assess_returns(returns, "S.R")
```

```
##   Rank  Names  Value
## 1    1 Fund_1  6.99%
## 2    2 Fund_3  1.01%
## 3    3 Fund_2 -0.77%
## 4    4 Fund_4 -1.14%
```

## `tmplot()`


```r
library("quantmod")
data <- getSymbols("^ks11", from=Sys.Date()-1000, to=Sys.Date(), auto.assign=F)

tmplot(data)
```

<img src="figure/unnamed-chunk-5-1.png" style="display: block; margin: auto;" />

```r
tm1plot(data, "KS11.Close")
```

<img src="figure/unnamed-chunk-5-2.png" style="display: block; margin: auto;" />

## `efff()`


```r
set.seed(123)
index <- matrix(rnorm(4000, 1000, 10^2), 1000, 4)
data <- xts(round(index, 1), as.Date(16001:17000)) # xts package for time series data
names(data) <- paste("Fund", 1:4, sep="_")
returns <- Xday_returns(data, Xday = 1)

efff(returns, rg = 0.01039)
```

<img src="figure/unnamed-chunk-6-1.png" style="display: block; margin: auto;" />

```
##         Fund_1    Fund_2   Fund_3    Fund_4    Std.Dev Exp.Return
## 6477 0.2502071 0.2316034 0.258208 0.2599815 0.07466931 0.01039000
## 5364 0.2507828 0.2286802 0.262191 0.2583459 0.07463115 0.01038519
##         sharpe                    Method Point_color
## 6477 0.1391468 Returns of goal Portfolio       green
## 5364 0.1391535          Market Portfolio         red
```
